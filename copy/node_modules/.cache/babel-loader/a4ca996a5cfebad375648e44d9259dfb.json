{"ast":null,"code":"import _regeneratorRuntime from\"C:/react/bubbles/bubble-pupping/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/react/bubbles/bubble-pupping/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/react/bubbles/bubble-pupping/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./App.css\";import React,{useState,useEffect}from\"react\";import Game from\"./component/Game\";import Welcome from\"./component/Welcome\";import GameOver from\"./component/GameOver\";import HighScores from\"./component/HighScores\";import db from\"./firebase\";import{collection,getDocs,addDoc,query,orderBy,limit}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),gameStarted=_useState2[0],setGameStarted=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),pointCount=_useState4[0],setPointCount=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),gameOver=_useState6[0],setGameOver=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),scores=_useState8[0],setScores=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),nickname=_useState10[0],setNickname=_useState10[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getScores();case 2:res=_context.sent;setScores(res);case 4:case\"end\":return _context.stop();}}},_callee);})),[scores]);function writeUserData(){return _writeUserData.apply(this,arguments);}function _writeUserData(){_writeUserData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var docRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return addDoc(collection(db,\"scores\"),{nickname:nickname,score:pointCount});case 2:docRef=_context2.sent;console.log(\"document written with ID: \",docRef.id);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _writeUserData.apply(this,arguments);}function getScores(){return _getScores.apply(this,arguments);}function _getScores(){_getScores=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var allScores,topScores,scoreSnapshot,scoreList;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:allScores=collection(db,\"scores\");topScores=query(allScores,orderBy(\"score\",\"desc\"),limit(3));_context3.next=4;return getDocs(topScores);case 4:scoreSnapshot=_context3.sent;scoreList=scoreSnapshot.docs.map(function(doc){return doc.data();});return _context3.abrupt(\"return\",scoreList);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return _getScores.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"mainDiv\",children:[/*#__PURE__*/_jsx(HighScores,{scores:scores,setNickname:setNickname,nickname:nickname,writeUserData:writeUserData}),!gameStarted&&!gameOver&&/*#__PURE__*/_jsx(Welcome,{gameStarted:gameStarted,setGameStarted:setGameStarted,gameOver:gameOver}),gameStarted&&!gameOver&&/*#__PURE__*/_jsx(Game,{pointCount:pointCount,setPointCount:setPointCount,setGameOver:setGameOver,gameOver:gameOver}),gameOver&&/*#__PURE__*/_jsx(GameOver,{pointCount:pointCount,setPointCount:setPointCount,setGameStarted:setGameStarted,setGameOver:setGameOver,setNickname:setNickname,writeUserData:writeUserData})]});}export default App;","map":{"version":3,"sources":["C:/react/bubbles/bubble-pupping/src/App.js"],"names":["React","useState","useEffect","Game","Welcome","GameOver","HighScores","db","collection","getDocs","addDoc","query","orderBy","limit","App","gameStarted","setGameStarted","pointCount","setPointCount","gameOver","setGameOver","scores","setScores","nickname","setNickname","getScores","res","writeUserData","score","docRef","console","log","id","allScores","topScores","scoreSnapshot","scoreList","docs","map","doc","data"],"mappings":"+bAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,IAAP,KAAiB,kBAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OACEC,UADF,CAEEC,OAFF,CAGEC,MAHF,CAIEC,KAJF,CAKEC,OALF,CAMEC,KANF,KAOO,oBAPP,C,wFASA,QAASC,CAAAA,GAAT,EAAe,CACb,cAAsCb,QAAQ,CAAC,KAAD,CAA9C,wCAAOc,WAAP,eAAoBC,cAApB,eACA,eAAoCf,QAAQ,CAAC,CAAD,CAA5C,yCAAOgB,UAAP,eAAmBC,aAAnB,eACA,eAAgCjB,QAAQ,CAAC,EAAD,CAAxC,yCAAOkB,QAAP,eAAiBC,WAAjB,eACA,eAA4BnB,QAAQ,CAAC,EAAD,CAApC,yCAAOoB,MAAP,eAAeC,SAAf,eACA,eAAgCrB,QAAQ,CAAC,EAAD,CAAxC,0CAAOsB,QAAP,gBAAiBC,WAAjB,gBAEAtB,SAAS,sEAAC,iKACUuB,CAAAA,SAAS,EADnB,QACFC,GADE,eAERJ,SAAS,CAACI,GAAD,CAAT,CAFQ,sDAAD,GAGN,CAACL,MAAD,CAHM,CAAT,CAPa,QAYEM,CAAAA,aAZF,iJAYb,0KACuBjB,CAAAA,MAAM,CAACF,UAAU,CAACD,EAAD,CAAK,QAAL,CAAX,CAA2B,CACpDgB,QAAQ,CAAEA,QAD0C,CAEpDK,KAAK,CAAEX,UAF6C,CAA3B,CAD7B,QACQY,MADR,gBAKEC,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0CF,MAAM,CAACG,EAAjD,EALF,wDAZa,wDAoBEP,CAAAA,SApBF,qIAoBb,wLACQQ,SADR,CACoBzB,UAAU,CAACD,EAAD,CAAK,QAAL,CAD9B,CAEQ2B,SAFR,CAEoBvB,KAAK,CAACsB,SAAD,CAAYrB,OAAO,CAAC,OAAD,CAAU,MAAV,CAAnB,CAAsCC,KAAK,CAAC,CAAD,CAA3C,CAFzB,wBAG8BJ,CAAAA,OAAO,CAACyB,SAAD,CAHrC,QAGQC,aAHR,gBAIQC,SAJR,CAIoBD,aAAa,CAACE,IAAd,CAAmBC,GAAnB,CAAuB,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAAvB,CAJpB,kCAKSJ,SALT,0DApBa,4CA4Bb,mBACE,aAAK,EAAE,CAAC,SAAR,wBACE,KAAC,UAAD,EACE,MAAM,CAAEf,MADV,CAEE,WAAW,CAAEG,WAFf,CAGE,QAAQ,CAAED,QAHZ,CAIE,aAAa,CAAEI,aAJjB,EADF,CAOG,CAACZ,WAAD,EAAgB,CAACI,QAAjB,eACC,KAAC,OAAD,EACE,WAAW,CAAEJ,WADf,CAEE,cAAc,CAAEC,cAFlB,CAGE,QAAQ,CAAEG,QAHZ,EARJ,CAcGJ,WAAW,EAAI,CAACI,QAAhB,eACC,KAAC,IAAD,EACE,UAAU,CAAEF,UADd,CAEE,aAAa,CAAEC,aAFjB,CAGE,WAAW,CAAEE,WAHf,CAIE,QAAQ,CAAED,QAJZ,EAfJ,CAsBGA,QAAQ,eACP,KAAC,QAAD,EACE,UAAU,CAAEF,UADd,CAEE,aAAa,CAAEC,aAFjB,CAGE,cAAc,CAAEF,cAHlB,CAIE,WAAW,CAAEI,WAJf,CAKE,WAAW,CAAEI,WALf,CAME,aAAa,CAAEG,aANjB,EAvBJ,GADF,CAmCD,CAED,cAAeb,CAAAA,GAAf","sourcesContent":["import \"./App.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Game from \"./component/Game\";\r\nimport Welcome from \"./component/Welcome\";\r\nimport GameOver from \"./component/GameOver\";\r\nimport HighScores from \"./component/HighScores\";\r\nimport db from \"./firebase\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  query,\r\n  orderBy,\r\n  limit,\r\n} from \"firebase/firestore\";\r\n\r\nfunction App() {\r\n  const [gameStarted, setGameStarted] = useState(false);\r\n  const [pointCount, setPointCount] = useState(0);\r\n  const [gameOver, setGameOver] = useState(\"\");\r\n  const [scores, setScores] = useState([]);\r\n  const [nickname, setNickname] = useState(\"\");\r\n\r\n  useEffect(async () => {\r\n    const res = await getScores();\r\n    setScores(res);\r\n  }, [scores]);\r\n\r\n  async function writeUserData() {\r\n    const docRef = await addDoc(collection(db, \"scores\"), {\r\n      nickname: nickname,\r\n      score: pointCount,\r\n    });\r\n    console.log(\"document written with ID: \", docRef.id);\r\n  }\r\n\r\n  async function getScores() {\r\n    const allScores = collection(db, \"scores\");\r\n    const topScores = query(allScores, orderBy(\"score\", \"desc\"), limit(3));\r\n    const scoreSnapshot = await getDocs(topScores);\r\n    const scoreList = scoreSnapshot.docs.map((doc) => doc.data());\r\n    return scoreList;\r\n  }\r\n\r\n  return (\r\n    <div id=\"mainDiv\">\r\n      <HighScores\r\n        scores={scores}\r\n        setNickname={setNickname}\r\n        nickname={nickname}\r\n        writeUserData={writeUserData}\r\n      />\r\n      {!gameStarted && !gameOver && (\r\n        <Welcome\r\n          gameStarted={gameStarted}\r\n          setGameStarted={setGameStarted}\r\n          gameOver={gameOver}\r\n        />\r\n      )}\r\n      {gameStarted && !gameOver && (\r\n        <Game\r\n          pointCount={pointCount}\r\n          setPointCount={setPointCount}\r\n          setGameOver={setGameOver}\r\n          gameOver={gameOver}\r\n        />\r\n      )}\r\n      {gameOver && (\r\n        <GameOver\r\n          pointCount={pointCount}\r\n          setPointCount={setPointCount}\r\n          setGameStarted={setGameStarted}\r\n          setGameOver={setGameOver}\r\n          setNickname={setNickname}\r\n          writeUserData={writeUserData}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}